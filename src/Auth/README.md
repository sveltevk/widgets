# Авторизация

С помощью виджета для авторизации вы можете максимально просто предоставить
пользователям возможность авторизоваться на вашем ресурсе. Перед авторизацией
пользователь сможет увидеть свою фотографию и уже авторизованных друзей.

Виджет поддерживает два вида авторизации:

- Обычный — пользователь будет переадресован на указанный в параметре `authUrl`
  адрес с полями: `uid`, `first_name`, `last_name`, `photo`, `photo_rec`, `hash`.

- Динамический — после авторизации будет вызвана функция onAuth c объектом data,
  содержащим поля `uid`, `first_name`, `last_name`, `photo`, `photo_rec`,
  `session`, `hash`, также пользователь будет авторизован в `openApi`.

Для проверки авторизации на бэкенде вы можете использовать полученный параметр
hash, сравнив его с md5 подписью от `app_id+user_id+secret_key`, например:
`md5(194253766748fTanppCrNSeuYPbA4ENCo)`.

## Инициализация Open API

Данный виджет требует инициализацию Open API. В тело страницы сайта добавьте
следующий код:

```html
<script type="text/javascript">
  VK.init({
    apiId: ВАШ_API_ID,
  });
</script>
```

## Параметры

Компонент `Auth` принимает следующие параметры:

| Параметр   | Тип                    | По умолчанию | Описание                                                                                                   |
| ---------- | ---------------------- | ------------ | ---------------------------------------------------------------------------------------------------------- |
| `width?`   | number                 | 200          | Ширина блока в пикселах. Минимальное значение: 200.                                                        |
| `onAuth?`  | (user:AuthUser) => any |              | Действие, производимое при авторизации (по умолчанию переход на указанный url с необходимыми параметрами). |
| `authUrl?` | string                 |              | URL, на который нужно перенаправить пользователя после авторизации, если не используется параметр onAuth.  |

### Данные пользователя

После авторизации данные о пользователе возвращаются в виде GET-параметров URL
при использовании `authUrl` или в виде параметров функции при использовании
`onAuth`. Возвращаются следующие поля:

- `uid` (number) — идентификатор пользователя;
- `first_name` (string) — имя;
- `last_name` (string) — фамилия;
- `photo` (string) — URL фотографии профиля пользователя шириной 200px;
- `photo_rec` (string) — URL фотографии профиля пользователя шириной 50px;
- `hash` (string) — служебный параметр, необходимый для проверки авторизации
  на удаленной стороне.
