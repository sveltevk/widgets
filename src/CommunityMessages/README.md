# Сообщения сообщества

Сообщения сообщества — это быстрый способ связи с пользователями ВКонтакте прямо на вашем сайте. Вы сможете ответить клиенту даже после того, как он покинет сайт — сообщения будут отправлены от имени сообщества.

Вашим клиентам больше не придется дополнительно регистрироваться и указывать контактные данные. Всё необходимое уже есть в хорошо знакомом интерфейсе ВКонтакте, включая возможность прикрепить к вопросу фотографию или документ.

Виджет располагается в правом нижнем углу и может быть раскрыт сразу после загрузки или по клику пользователя. Перед использованием виджета убедитесь, что сообщения включены в настройках сообщества.

Важно! Вы можете указать список разрешённых доменов, сообщение для статуса «Не в сети» и другие параметры в настройках сообщества, для которого вы создаёте виджет. В случае, если администратор длительное время не отвечает на сообщения, например, в ночное время — пользователь увидит предупреждение о том, что ответ займет больше времени.

## Параметры

Компонент `CommunityMessages` принимает параметры:

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
|`group`|number||Идентификатор сообщества, для которого будет создан виджет.|
|`onCanNotWrite?`|(reason:"offline" &#124; "no_access" &#124; "disabled_messages" &#124; "cant_write")=>any|| Функция, которая будет вызвана, если пользователь по каким-то причинам не может писать сообщения|
|`welcomeScreen?`|0&#124;1||Информация о том, нужно ли показывать экран приветствия (1 — да, 0 — нет)|
|`expandTimeout?`|number||Интервал до раскрытия виджета в миллисекундах. Обратите внимание, при обновлении страницы сохраняется состояние виджета — если он уже раскрыт пользователем, этот параметр не применяется.|
|`expanded?`|1||Если нужно раскрыть виджет сразу|
|`widgetPosition?`|"left"&#124;"right"|| выравнивание кнопки |
|`buttonType?`|"no_button"&#124;"blue_circle"||внешний вид кнопки|
|`disableButtonTooltip?`|1||если нужно отключить всплывающую подсказку|
|`tooltipButtonText?`|string||текст всплывающей подсказки|
|`disableNewMessagesSound?`|1||если нужно отключить звук о новом сообщении|
|`disableExpandChatSound?`|1|| если нужно отключить звук при раскрытии виджета|
|`disableTitleChange?`|1||если нужно отключить изменение заголовка страницы, когда приходит новое сообщение|

Для компонента доступны следующие методы:

- `destroy()` — удаляет виджет;
- `expand(options:{welcomeScreen?:1})` — разворачивает окно виджета, может принимать параметр `welcomeScreen` (`1` — показывать экран приветствия);
- `stopTitleAnimation()` — отключает смену заголовка после прихода нового сообщения;
- `minimize()` — сворачивает окно виджета.

## Пример использования

```svelte
<script>
  import { onMount } from 'svelte';
  import { CommunityMessages } from '@sveltevk/widgets';

  let widget;
  onMount(()=>{
    widget.stopTitleAnimation()
    widget.expand({
      welcomeScreen: 1,
    })
  })
</script>

<CommunityMessages bind:this={widget} group={123456}/>
```
